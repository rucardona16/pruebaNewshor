"use strict";
angular
        .module('homeModule', [

        ]);
"use strict";

angular
    .module('homeModule')
    .factory('homeService', homeService);

homeService.$inject = ['$q', '$window', '$http', 'urlService'];

function homeService($q, $window, $http, urlService) {

    var vm = this;

    vm.PostClient = function (data) {
        var deferred = $q.defer();
        var req = {
            method: 'POST',
            url: urlService.PostClient(),
            data: data
        };
        $http(req).then(function (data) {
            deferred.resolve(data);
        }, function (err) {
            deferred.resolve(err);
        });
        return deferred.promise;
    };


    return {
        PostClient: vm.PostClient
    }
}
'use strict';

angular
    .module('homeModule')
    .controller('homeController', homeController);

//Inject dependencies
homeController.$inject = ['$state', 'homeService', '$window', 'FileSaver', 'Blob'];

function homeController($state, homeService, $window, FileSaver, Blob) {

    $window.scrollTo(0, 0);
    var vm = this;
    vm.clients = null;
    var datos = {};

    vm.readRegistrado = function(file){
        datos.registrado = file.content.split(/\n/);
    }

    vm.readContenido = function(file){
        datos.contenido = file.content.split(/\n/);
    }

    vm.download = function() {
        console.log(datos);
        homeService.PostClient(datos).then(function(data){
            var txt = data.data.toString().replace (/,/g,'\n');
            var datatxt = new Blob([txt], { type: 'text/plain;charset=utf-8' });
            console.log(datatxt);
            //console.log(datatxt.tokenJWT.replace (/,/g,/\n/));
            FileSaver.saveAs(datatxt, 'RESULTADOS.txt');
        }, function(error){
            console.log(error);
        });
    };

}
"use strict";
angular
        .module('glanz', [
    
            //module for state routing.
            'ngFileSaver',
            'ui.router',
            'angularFileInput',

            
            //module feature
            'homeModule',
            
            //module components

        ]);
(function () {
    "use strict";

    angular
        .module('glanz')
        .factory('utilitiesService', utilitiesService);

    utilitiesService.$inject = [];

    function utilitiesService() {

        var vm = this;

        vm.getToday = function () {
            var today = new Date();
            var dd = today.getDate();
            var mm = today.getMonth() + 1;
            var yyyy = today.getFullYear();
            if (dd < 10) {
                dd = '0' + dd
            }
            if (mm < 10) {
                mm = '0' + mm
            }
            var today = yyyy + '-' + mm + '-' + dd;
            return today;
        }

        return {
            getToday: vm.getToday
        }

    }
})();
(function () {
    "use strict";

    angular
        .module('glanz')
        .factory('urlService', urlService);

    urlService.$inject = [];

    function urlService() {

        var vm = this;
        var endpoint = "http://localhost:8080"

        vm.PostClient = function () {
            return endpoint + '/client/searchClient';
        };

        return {
            PostClient: vm.PostClient
        }

    }
})();
"use strict";

angular
    .module('glanz')
    .config(routes);

routes.$inject = ['$stateProvider', '$urlRouterProvider', '$httpProvider', '$locationProvider'];

function routes($stateProvider, $urlRouterProvider, $httpProvider, $locationProvider) {

    $locationProvider.hashPrefix('');
   
    $stateProvider
        .state('home', {
            url: '/',
            templateUrl: 'app/features/home/home.view.html',
            controller: 'homeController as home'
        });


    $urlRouterProvider.otherwise('/')
}
"use strict";

angular
    .module('glanz')
    .run(run);

run.$inject = ['$rootScope'];

function run($rootScope) {
    
}